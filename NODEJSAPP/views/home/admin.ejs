<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <title>Admin</title>
    <%- include('../_partial/_header'); -%> 
    <%- include('../css/background'); -%> 
    <%- include('../css/stylesheet'); -%> 
    <%- include('../css/dialogbox'); -%> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <div class="main">
            <div class="select">
                <form action="/search" method="post">
                    <select name="videoType" id="">
                        <option value="asp">ASP.NET</option>
                        <option value="cpp">C++</option>
                        <option value="java">Java</option>
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="sql">SQL</option>
                    </select>
                    <div class="search">
                        <input type="text">
                        <button type="submit" class="btn btn-primary">Search</button>
                    </div>
                </form> 
                <button type="button" class="btn btn-primary" onclick="showAdd()">Add record</button>
            </div>
        </div>
    </div>

    <div class="container">
        <table class="table table-dark table-striped">
            <thead>
                <tr>
                    <th>Video ID</th>
                    <th>Type</th>
                    <th>Video Name</th>
                    <th>View</th>
                    <th>Like</th>
                    <th>Publish Date</th>
                    <th>Duration</th>
                    <th>operation</th>
                </tr>
            </thead>
            <tbody>
                <% data.forEach(function(item) { %>
                <tr>
                    <td><%= item.vid %></td>
                    <td><%= item.type %></td>
                    <td><%= item.vname %></td>
                    <td><%= item.viewCount %></td>
                    <td><%= item.likeCount %></td>
                    <td><%= moment(item.publishDate).format('DD/MM/YYYY') %></td>
                    <td><%= item.duration %></td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button type="button" class="btn btn-primary" onclick="showUpdate()">Update</button>
                            <button type="button" class="btn btn-danger" data-id="<%= item.vid %>" onclick="showDelete()">Delete</button>
                        </div>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>

    <div class="dialog" id="dialog" onclick="hideBox()"></div>

    <div class="dialog-content" id="addbox">
        <div class="dialog-header">
            <h3>Add record</h3>
            <div class="close">
                <span class="close" onclick="hideBox()">&times;</span>
            </div>
        </div>
        <form action="/add" method="post">
            <div>
                <p>Video ID</p>
                <p>
                    <input type="text" class="form-control" autofocus placeholder="embedded id" name="videoId" required/>
                </p>
            </div>
            <div>
                <p>Video Type</p>
                <p>
                    <div>
                        <select class="box-select" name="videoType" id="">
                            <option value="asp">ASP.NET</option>
                            <option value="cpp">C++</option>
                            <option value="java">Java</option>
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="sql">SQL</option>
                        </select>
                    </div>
                </p>
            </div>
            <div>
                <p>Video Name</p>
                <p>
                    <input type="text" class="form-control" name="videoName" required/>
                </p>
            </div>
            <div>
                <p>View Count</p>
                <p>
                    <input type="text" class="form-control" name="viewCount" required/>
                </p>
            </div>
            <div>
                <p>Like Count</p>
                <p>
                    <input type="text" class="form-control" name="likeCount" required/>
                </p>
            </div>
            <div>
                <p>Publish Date</p>
                <p>
                    <div class="md-form md-outline input-with-post-icon datepicker">
                        <input placeholder="Select date" type="date" id="example" class="form-control" name="publishDate" required>
                      </div>
                </p>
            </div>
            <div>
                <p>Duration</p>
                <p>
                    <input type="text" class="form-control" autofocus placeholder="00:00:00" name="duration" required/>
                </p>
            </div>
            <div class="dialog-footer">
                <button class="form__button btn btn-primary" type="submit">Submit</button>
                <!-- <button class="cancel" onclick="hideAdd()">Cancel</button> --> 
            </div>
        </form>
    </div>
    
    <div class="dialog-content" id="deletebox">
        <div class="dialog-header">
            <div class="close">
                <span class="close" onclick="hideBox()">&times;</span>
            </div>
        </div>
        <form action="/delete" method="post">
            <div><h5>Please confirm again to delete this record</h3></div>
            <div class="dialog-footer">
                <button class="form__button btn btn-primary" type="submit">Confirm</button>
                <!-- <button class="cancel" onclick="hideAdd()">Cancel</button> --> 
            </div>
        </form>
    </div>
    
</body>

<script>
    function showAdd() {
        document.getElementById("dialog").style.display = "block";
        document.getElementById("addbox").style.display = "block";
    }

    function showDelete() {
        document.getElementById("dialog").style.display = "block";
        document.getElementById("deletebox").style.display = "block";
    }

    function hideBox() {
        document.getElementById("dialog").style.display = "none";
        document.getElementById("addbox").style.display = "none";
        document.getElementById("deletebox").style.display = "none";
    }


</script>


<%- include('../_partial/_footer'); -%>